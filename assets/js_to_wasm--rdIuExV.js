(function(){"use strict";let a,w=null;function l(){return(w===null||w.byteLength===0)&&(w=new Uint8Array(a.memory.buffer)),w}let m=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});m.decode();const O=2146435072;let x=0;function j(e,t){return x+=t,x>=O&&(m=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),m.decode(),x=t),m.decode(l().subarray(e,e+t))}function y(e,t){return e=e>>>0,j(e,t)}function W(e){const t=a.__externref_table_alloc();return a.__wbindgen_export_2.set(t,e),t}function A(e,t){try{return e.apply(this,t)}catch(n){const r=W(n);a.__wbindgen_exn_store(r)}}function I(e,t){return e=e>>>0,l().subarray(e/1,e/1+t)}let h=0;const p=new TextEncoder;"encodeInto"in p||(p.encodeInto=function(e,t){const n=p.encode(e);return t.set(n),{read:e.length,written:n.length}});function T(e,t,n){if(n===void 0){const i=p.encode(e),u=t(i.length,1)>>>0;return l().subarray(u,u+i.length).set(i),h=i.length,u}let r=e.length,c=t(r,1)>>>0;const s=l();let o=0;for(;o<r;o++){const i=e.charCodeAt(o);if(i>127)break;s[c+o]=i}if(o!==r){o!==0&&(e=e.slice(o)),c=n(c,r,r=o+e.length*3,1)>>>0;const i=l().subarray(c+o,c+r),u=p.encodeInto(e,i);o+=u.written,c=n(c,r,o,1)>>>0}return h=o,c}let f=null;function _(){return(f===null||f.buffer.detached===!0||f.buffer.detached===void 0&&f.buffer!==a.memory.buffer)&&(f=new DataView(a.memory.buffer)),f}function g(e){return e==null}function S(e){const t=typeof e;if(t=="number"||t=="boolean"||e==null)return`${e}`;if(t=="string")return`"${e}"`;if(t=="symbol"){const c=e.description;return c==null?"Symbol":`Symbol(${c})`}if(t=="function"){const c=e.name;return typeof c=="string"&&c.length>0?`Function(${c})`:"Function"}if(Array.isArray(e)){const c=e.length;let s="[";c>0&&(s+=S(e[0]));for(let o=1;o<c;o++)s+=", "+S(e[o]);return s+="]",s}const n=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(n&&n.length>1)r=n[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function R(e){return a.chance_to_cost_wrapper(e)}function U(e){return a.cost_to_chance_optimized_wrapper(e)}function B(e){return a.chance_to_cost_optimized_wrapper(e)}function D(e){return a.parser_wrapper_unified(e)}function M(e){return a.average_cost_wrapper(e)}function $(e){return a.cost_to_chance_arr_wrapper(e)}const L=new Set(["basic","cors","default"]);async function k(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(r){if(e.ok&&L.has(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function v(){const e={};return e.wbg={},e.wbg.__wbg_Error_e17e777aac105295=function(t,n){return Error(y(t,n))},e.wbg.__wbg_Number_998bea33bd87c3e0=function(t){return Number(t)},e.wbg.__wbg_call_13410aac570ffff7=function(){return A(function(t,n){return t.call(n)},arguments)},e.wbg.__wbg_done_75ed0ee6dd243d9d=function(t){return t.done},e.wbg.__wbg_error_7534b8e9a36f1ab4=function(t,n){let r,c;try{r=t,c=n,console.error(y(t,n))}finally{a.__wbindgen_free(r,c,1)}},e.wbg.__wbg_getRandomValues_3c9c0d586e575a16=function(){return A(function(t,n){globalThis.crypto.getRandomValues(I(t,n))},arguments)},e.wbg.__wbg_get_0da715ceaecea5c8=function(t,n){return t[n>>>0]},e.wbg.__wbg_get_458e874b43b18b25=function(){return A(function(t,n){return Reflect.get(t,n)},arguments)},e.wbg.__wbg_getwithrefkey_1dc361bd10053bfe=function(t,n){return t[n]},e.wbg.__wbg_instanceof_ArrayBuffer_67f3012529f6a2dd=function(t){let n;try{n=t instanceof ArrayBuffer}catch{n=!1}return n},e.wbg.__wbg_instanceof_Uint8Array_9a8378d955933db7=function(t){let n;try{n=t instanceof Uint8Array}catch{n=!1}return n},e.wbg.__wbg_isArray_030cce220591fb41=function(t){return Array.isArray(t)},e.wbg.__wbg_isSafeInteger_1c0d1af5542e102a=function(t){return Number.isSafeInteger(t)},e.wbg.__wbg_iterator_f370b34483c71a1c=function(){return Symbol.iterator},e.wbg.__wbg_length_186546c51cd61acd=function(t){return t.length},e.wbg.__wbg_length_6bb7e81f9d7713e4=function(t){return t.length},e.wbg.__wbg_new_19c25a3f2fa63a02=function(){return new Object},e.wbg.__wbg_new_1f3a344cf3123716=function(){return new Array},e.wbg.__wbg_new_638ebfaedbf32a5e=function(t){return new Uint8Array(t)},e.wbg.__wbg_new_8a6f238a6ece86ea=function(){return new Error},e.wbg.__wbg_next_5b3530e612fde77d=function(t){return t.next},e.wbg.__wbg_next_692e82279131b03c=function(){return A(function(t){return t.next()},arguments)},e.wbg.__wbg_prototypesetcall_3d4a26c1ed734349=function(t,n,r){Uint8Array.prototype.set.call(I(t,n),r)},e.wbg.__wbg_set_3f1d0b984ed272ed=function(t,n,r){t[n]=r},e.wbg.__wbg_set_90f6c0f7bd8c0415=function(t,n,r){t[n>>>0]=r},e.wbg.__wbg_stack_0ed75d68575b0f3c=function(t,n){const r=n.stack,c=T(r,a.__wbindgen_malloc,a.__wbindgen_realloc),s=h;_().setInt32(t+4,s,!0),_().setInt32(t+0,c,!0)},e.wbg.__wbg_value_dd9372230531eade=function(t){return t.value},e.wbg.__wbg_wbindgenbigintgetasi64_ac743ece6ab9bba1=function(t,n){const r=n,c=typeof r=="bigint"?r:void 0;_().setBigInt64(t+8,g(c)?BigInt(0):c,!0),_().setInt32(t+0,!g(c),!0)},e.wbg.__wbg_wbindgenbooleanget_3fe6f642c7d97746=function(t){const n=t,r=typeof n=="boolean"?n:void 0;return g(r)?16777215:r?1:0},e.wbg.__wbg_wbindgendebugstring_99ef257a3ddda34d=function(t,n){const r=S(n),c=T(r,a.__wbindgen_malloc,a.__wbindgen_realloc),s=h;_().setInt32(t+4,s,!0),_().setInt32(t+0,c,!0)},e.wbg.__wbg_wbindgenin_d7a1ee10933d2d55=function(t,n){return t in n},e.wbg.__wbg_wbindgenisbigint_ecb90cc08a5a9154=function(t){return typeof t=="bigint"},e.wbg.__wbg_wbindgenisfunction_8cee7dce3725ae74=function(t){return typeof t=="function"},e.wbg.__wbg_wbindgenisobject_307a53c6bd97fbf8=function(t){const n=t;return typeof n=="object"&&n!==null},e.wbg.__wbg_wbindgenisundefined_c4b71d073b92f3c5=function(t){return t===void 0},e.wbg.__wbg_wbindgenjsvaleq_e6f2ad59ccae1b58=function(t,n){return t===n},e.wbg.__wbg_wbindgenjsvallooseeq_9bec8c9be826bed1=function(t,n){return t==n},e.wbg.__wbg_wbindgennumberget_f74b4c7525ac05cb=function(t,n){const r=n,c=typeof r=="number"?r:void 0;_().setFloat64(t+8,g(c)?0:c,!0),_().setInt32(t+0,!g(c),!0)},e.wbg.__wbg_wbindgenstringget_0f16a6ddddef376f=function(t,n){const r=n,c=typeof r=="string"?r:void 0;var s=g(c)?0:T(c,a.__wbindgen_malloc,a.__wbindgen_realloc),o=h;_().setInt32(t+4,o,!0),_().setInt32(t+0,s,!0)},e.wbg.__wbg_wbindgenthrow_451ec1a8469d7eb6=function(t,n){throw new Error(y(t,n))},e.wbg.__wbindgen_cast_2241b6af4c4b2941=function(t,n){return y(t,n)},e.wbg.__wbindgen_cast_4625c577ab2ec9ee=function(t){return BigInt.asUintN(64,t)},e.wbg.__wbindgen_cast_9ae0607507abb057=function(t){return t},e.wbg.__wbindgen_cast_d6cd19b81560fd6e=function(t){return t},e.wbg.__wbindgen_init_externref_table=function(){const t=a.__wbindgen_export_2,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e}function N(e,t){return a=e.exports,b.__wbindgen_wasm_module=t,f=null,w=null,a.__wbindgen_start(),a}async function b(e){if(a!==void 0)return a;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/Honing-Forecast/assets/honing_forecast_bg-Cwlnx5HU.wasm",self.location.href));const t=v();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:r}=await k(await e,t);return N(n,r)}const E=["Red","Blue","Leaps","Shards","Oreha","Gold","Silver"];async function P(e){return await b(),B(e)}async function V(e){return await b(),R(e)}async function q(e){return await b(),$(e)}async function H(e){return await b(),U(e)}async function X(e){return await b(),D(e)}async function Y(e){return await b(),M(e)}self.addEventListener("message",async e=>{const t=e.data;let n=Date.now();const{id:r,payload:c,which_one:s}=t;if(!(s=="CostToChance"||s=="CostToChanceArr"||s=="CostToChanceOptimized"||s=="ChanceToCost"||s=="ParserUnified"||s=="AverageCost"||s=="ChanceToCostOptimized"))throw"Invalid js_to_wasm operation type: "+s;console.log(s);let o;if(s=="CostToChance"){let i=await H(c);const u=i.reasons.map((d,C)=>{const z=(d*100).toFixed(2);return`${E[C]}: ${z}% chance to have enough ${E[C]}`}),F=i.optimized_reasons.map((d,C)=>`${(d*100).toFixed(2)}% chance to have enough ${E[C]}`);o={chance:(i.chance*100).toFixed(2),reasons:u,hist_counts:i.hist_counts,hist_mins:i.hist_mins,hist_maxs:i.hist_maxs,upgrade_strings:i.upgrade_strings||[],juice_strings_armor:i.juice_strings_armor||[],juice_strings_weapon:i.juice_strings_weapon||[],budgets_red_remaining:i.budgets_red_remaining,budgets_blue_remaining:i.budgets_blue_remaining,buy_arr:i.buy_arr,optimized_chance:(i.optimized_chance*100).toFixed(2),optimized_reasons:F}}else if(s=="CostToChanceArr"){let i=await q(c);const u=i.final_chances.map(d=>(d*100).toFixed(2)),F=i.optimized_chances.map(d=>(d*100).toFixed(2));o={final_chances:u,failure_rates_arr:i.typed_fail_counters,budgets_red_remaining:i.budgets_red_remaining,budgets_blue_remaining:i.budgets_blue_remaining,optimized_chances:F,optimized_fail_arr:i.optimized_fail_counters}}else if(s=="ChanceToCost"){let i=await V(c);o={hundred_budgets:i.hundred_budgets,hundred_chances:i.hundred_chances,hist_counts:i.hist_counts,hist_mins:i.hist_mins,hist_maxs:i.hist_maxs}}else if(s=="ChanceToCostOptimized"){let i=await P(c);o={hundred_budgets:i.hundred_budgets,hundred_chances:i.hundred_chances,hist_counts:i.hist_counts,hist_mins:i.hist_mins,hist_maxs:i.hist_maxs,hundred_gold_costs:i.hundred_gold_costs}}else if(s=="ParserUnified"){let i=await X(c);o={upgradeArr:i[0],unlocks:i[1],other_strategy_prob_dists:i[2]}}else s=="AverageCost"&&(o={average_costs:await Y(c)});o.run_time=((Date.now()-n)/1e3).toFixed(2),self.postMessage({type:"result",id:r,result:o})})})();
//# sourceMappingURL=js_to_wasm--rdIuExV.js.map
